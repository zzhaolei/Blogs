---
title: VirtualBox基础使用
copyright: true
date: 2018-05-06 09:59:41
tags:
  - VirtualBox
categories:
---

# VirtualBox基础使用

`VirtualBox`相对`VMware`来说是轻量级的虚拟软件, 最关键的是`VirtualBox`是开源免费的.

## 配置全局选项

点击`管理-->全局设定`, 进入设置界面.

 - `常规`: 可以配置`默认虚拟电脑的位置`, 可以更改这个路径.

其他的一般不需要修改

## 创建一个虚拟机

进入`VirtualBox`的图形化界面, 点击`新建`, 再点击下方的`专家模式`.

之后输入虚拟机的`名称`、选择`类型`、`版本`、`内存大小`, `虚拟硬盘`采用默认的`现在创建虚拟硬盘`.

我的是`Manjaro`、`Linux`、`Arch Linux (64-bit)`、`2048`(注意自己的主机的内存大小, 最好不要超过主机的一半).

点击`创建`, 选择文件位置, 一般使用默认, 调整硬盘大小和硬盘类型, 一般硬盘大小给20G够用, 硬盘类型使用默认的`vdi`就行. 点击`创建`. 虚拟机列表中会显示刚创建的虚拟机. 

点击右侧的`明细`, 可以查看虚拟机的基础配置信息. 

点击右侧的`备份`, 可以给当前的虚拟机状态做快照, 做快照后, 之后做的更改等等, 都可以通过恢复快照来还原.

点击左上的设置, 可以设置一些虚拟机的配置信息, 主要需要修改`网络选项`, 默认虚拟机使用的是`网络地址转换NAT`, 这样主机和虚拟机是无法通信的, 可以在`网络选项卡`中的`高级`中配置`端口转发`. 配置好后, 主机和虚拟机通过转发的端口通信.

比如配置`ssh`转发:
```
--------------------------------------------------------------------------------------------
|   名称    |   协议    |   主机IP    |    主机端口    |    子系统IP    |    子系统端口    |
--------------------------------------------------------------------------------------------
|    SSH    |    TCP    |             |      6666      |                |        22        |
--------------------------------------------------------------------------------------------
```

`名称`不是固定, 方便知道用途就行, `主机IP`可以省略, `子系统IP`可以省略, 子系统使用`22`端口作为`SSH`的服务端口, 
在主机上通过`SSH`连接工具连接虚拟机的地址为`ssh 6666 lei@127.0.0.1`


## 修改虚拟机的硬盘大小

进入到`VirtualBox`的安装目录(`VBoxManage`所在的目录).

使用`VBoxManage list hdds`, 查看所有的虚拟机硬盘, 包含做过的快照.

```
UUID:           0d25ae13-9c8e-4265-b9c0-d581637c84dc
Parent UUID:    base
State:          created
Type:           normal (base)
Location:       C:\Virtual\CentOS 7\CentOS 7.vdi
Storage format: VDI
Capacity:       20480 MBytes
Encryption:     disabled
```

使用`VBoxManage modifyhd UUID --resize size`, `UUID`是想要修改的虚拟机状态的硬盘`UUID`, `size`是想要修改为的硬盘大小, 是`MB`, 需要将`GB`转为`MB`.

之后就是进入系统中进行格式化和挂载.

